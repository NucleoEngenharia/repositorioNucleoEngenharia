<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<title>Núcleo Engenharia Consultiva - Intranet 2.0</title>
		<h:outputStylesheet library="css" name="login.css" />
		<h:outputStylesheet library="css" name="form.css" />
	</h:head>
	<body>
		<div id="main-wrapper">
			<div id="logo">
				<p:graphicImage library="img" name="Logotipo_login.png" />
			</div>
			<center>
				<div id="content">
					<h:form>
					<p:messages/>
						<p:panelGrid rendered="#{!loginBean.primeiroAcesso}" columns="2">
						    <f:facet name="header">
								<p:outputLabel value="Login" />
						    </f:facet> 
							<p:outputLabel for="user" value="Usuário: " />
							<p:inputText id="user" value="#{loginBean.usuario}"	requiredMessage="Usuário é um campo obrigatório" />
							<p:outputLabel for="senha" value="Senha: "/>
							<p:password id="senha" value="#{loginBean.senha}" requiredMessage="Senha é um campo obrigatório" />
						 </p:panelGrid>
						 <br/>
						 <p:commandButton action="#{loginBean.autenticar}"
						 		update="@form" value="Entrar" rendered="#{!loginBean.primeiroAcesso}"/>
						 
						 <br/>
						 <p:panelGrid  rendered="#{loginBean.primeiroAcesso}" columns="2">
						 	<f:facet name="header">
						 		<p:outputLabel value="Cadastro de Senha"/>
						 	</f:facet>
							<p:outputLabel value="Matrícula: "/>
							<p:outputLabel value="#{loginBean.usuario}"/>
							<p:outputLabel value="Senha: "/>
							<p:password value="#{loginBean.senha}"
								requiredMessage="Senha é um campo obrigatório" feedback="true" />
							<p:outputLabel value="Confirmação: " />
							<p:password value="#{loginBean.confirmSenha}" 
							 requiredMessage="Confirme sua senha" feedback="true" />
						</p:panelGrid>
						<br>
						<p:commandButton rendered="#{loginBean.primeiroAcesso}" action="#{loginBean.cadastrarSenha}"
						 update="@form" value="Cadastrar Senha"/>
						</br>
						<p:commandButton value="TesteMail" action="#{horariosEmail.enviarHorariosEmail}"/>
					</h:form>
				</div>
			</center>
		</div>
	</body>
</f:view>
</html>